import { useEffect } from "react"
import { useRain } from "../hooks/useRain"




export const Rain = () => {


  const { rainState, playRain } = useRain()


  useEffect(() => {


    const isPlaying = () => {

      const audioRainElement = document.getElementById("audio-rain") as HTMLAudioElement

      if (rainState.isPlaying) {
        audioRainElement.play()
      } else {
        audioRainElement.pause()
      }
    }

    isPlaying()



  }, [rainState])


  return (
    <div className="hero-item">
      <audio id="audio-rain" src={`/rain/${rainState.name}`} loop></audio>

      <svg className={rainState.isPlaying ? "svg svg-active" : "svg"} width="73" height="73" viewBox="0 0 73 73" fill="none">
        <path d="M49.9452 11.7413C46.0528 11.7413 42.3885 13.495 39.6653 16.6032C37.8617 14.6784 35.5091 13.6091 32.9926 13.6091C28.6012 13.6091 24.8229 16.8955 23.5896 21.5935H21.565C15.8761 21.5935 11.2495 26.8974 11.2495 33.4132C11.2495 39.929 15.8761 45.2258 21.565 45.2258H49.9452C58.0008 45.2258 64.5523 37.7191 64.5523 28.4871C64.5523 19.2481 58.0008 11.7413 49.9452 11.7413ZM49.9452 41.8752H21.565C17.5086 41.8752 14.208 38.0755 14.208 33.4061C14.208 28.7366 17.5086 24.9369 21.565 24.9369H24.7659C25.493 24.9369 26.1061 24.3452 26.2273 23.5397C26.7834 19.7257 29.6349 16.9526 32.9926 16.9526C35.1669 16.9526 37.163 18.1074 38.4748 20.1178C38.7528 20.5384 39.1805 20.7879 39.6439 20.795C40.0788 20.795 40.5421 20.5669 40.8273 20.1534C43.0586 16.9312 46.3736 15.0848 49.938 15.0848C56.3612 15.0848 61.5867 21.0945 61.5867 28.48C61.5938 35.8656 56.3683 41.8752 49.9452 41.8752ZM20.4529 49.0754L11.6772 59.12C11.0998 59.7759 11.1069 60.8381 11.6915 61.4868C11.9766 61.8076 12.3544 61.9716 12.7323 61.9716C13.1172 61.9716 13.4951 61.8076 13.7874 61.4726L22.563 51.428C23.1405 50.7721 23.1334 49.7099 22.5488 49.0612C21.9642 48.4053 21.0232 48.4124 20.4529 49.0754ZM34.0905 49.0612C33.5059 48.4124 32.572 48.4196 31.9946 49.0754L27.6103 54.0942C27.0329 54.75 27.04 55.8122 27.6246 56.461C27.9097 56.7818 28.2876 56.9457 28.6654 56.9457C29.0503 56.9457 29.4282 56.7818 29.7205 56.4467L34.1047 51.428C34.6822 50.765 34.6751 49.7099 34.0905 49.0612ZM55.2705 49.0754L50.8862 54.0942C50.3087 54.75 50.3159 55.8122 50.9004 56.461C51.1856 56.7818 51.5634 56.9457 51.9413 56.9457C52.3262 56.9457 52.7041 56.7818 52.9963 56.4467L57.3806 51.428C57.9581 50.7721 57.9509 49.7099 57.3664 49.0612C56.7818 48.4053 55.8479 48.4124 55.2705 49.0754ZM43.7359 49.0754L34.9602 59.12C34.3828 59.7759 34.3899 60.8381 34.9745 61.4868C35.2596 61.8076 35.6375 61.9716 36.0153 61.9716C36.4002 61.9716 36.7781 61.8076 37.0704 61.4726L45.8389 51.428C46.4164 50.7721 46.4092 49.7099 45.8247 49.0612C45.2472 48.4053 44.3062 48.4124 43.7359 49.0754Z" fill="white" />
      </svg>


      <div className={rainState.isPlaying ? "btn btn-active" : "btn"} id="btn-music" onClick={playRain} ><div className="btn-circle"></div></div>





      {/* <pre>{JSON.stringify(rainState, null, 2)}</pre> */}
    </div>
  )
}
